{% extends 'base.html' %}

{% block title %}HTMX + Alpine.js UI Pattern Examples{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <h1 class="mb-4">
            <i class="bi bi-lightning-fill text-primary"></i>
            HTMX + Alpine.js UI Pattern Examples
        </h1>

        <div class="alert alert-info">
            <i class="bi bi-info-circle"></i>
            <strong>Purpose:</strong> These examples validate UI patterns for the web-based statistical analysis platform.
            Open your browser's DevTools Console to see state management logs.
        </div>
    </div>
</div>

<div class="row mt-4">
    <!-- Example 1 -->
    <div class="col-md-4 mb-4">
        <div class="card h-100">
            <div class="card-body">
                <h5 class="card-title">
                    <i class="bi bi-arrow-left-right text-primary"></i>
                    Dependent Dropdowns
                </h5>
                <p class="card-text">
                    Variable selected in dropdown A cannot appear in dropdown B.
                    Tests exclusion logic and state restoration.
                </p>
                <h6 class="text-muted small">Test Cases:</h6>
                <ul class="small">
                    <li>Select X variable → Y excludes it</li>
                    <li>Refresh page → selections restore</li>
                    <li>Clear selection → all options available</li>
                </ul>
            </div>
            <div class="card-footer">
                <a href="{% url 'patterns:dependent_dropdowns' %}" class="btn btn-primary">
                    <i class="bi bi-play-fill"></i> Try Example
                </a>
            </div>
        </div>
    </div>

    <!-- Example 2 -->
    <div class="col-md-4 mb-4">
        <div class="card h-100">
            <div class="card-body">
                <h5 class="card-title">
                    <i class="bi bi-eye text-success"></i>
                    Conditional Visibility
                </h5>
                <p class="card-text">
                    Show input C only when input A equals X. Tests dynamic visibility
                    with HTMX partial updates.
                </p>
                <h6 class="text-muted small">Test Cases:</h6>
                <ul class="small">
                    <li>Select "t-test" → sample type appears</li>
                    <li>Select "chi-square" → hides conditional</li>
                    <li>Refresh → visibility rules re-apply</li>
                </ul>
            </div>
            <div class="card-footer">
                <a href="{% url 'patterns:conditional_visibility' %}" class="btn btn-success">
                    <i class="bi bi-play-fill"></i> Try Example
                </a>
            </div>
        </div>
    </div>

    <!-- Example 3 -->
    <div class="col-md-4 mb-4">
        <div class="card h-100">
            <div class="card-body">
                <h5 class="card-title">
                    <i class="bi bi-clock-history text-warning"></i>
                    State Restoration
                </h5>
                <p class="card-text">
                    Complex form with multiple dependencies. Tests progressive restoration
                    and HTMX + Alpine synchronization.
                </p>
                <h6 class="text-muted small">Test Cases:</h6>
                <ul class="small">
                    <li>Fill complete form → refresh → restores</li>
                    <li>Change dataset → variables clear</li>
                    <li>Switch distribution → params save</li>
                </ul>
            </div>
            <div class="card-footer">
                <a href="{% url 'patterns:state_restoration' %}" class="btn btn-warning">
                    <i class="bi bi-play-fill"></i> Try Example
                </a>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header bg-dark text-white">
                <h5 class="mb-0"><i class="bi bi-code-square"></i> Implementation Notes</h5>
            </div>
            <div class="card-body">
                <h6>Key Patterns Used:</h6>
                <ul>
                    <li><strong>Alpine.js Reactivity:</strong> <code>x-data</code>, <code>x-model</code>, <code>x-show</code>, computed properties</li>
                    <li><strong>State Persistence:</strong> <code>localStorage</code> with <code>$nextTick()</code> for DOM sync</li>
                    <li><strong>HTMX Partials:</strong> Server-rendered HTML swapped into page</li>
                    <li><strong>Progressive Restoration:</strong> Restore primary → secondary → conditional fields</li>
                </ul>

                <h6 class="mt-3">Architecture Reference:</h6>
                <p class="mb-0">
                    <a href="https://github.com/vnijs/pyrsm/blob/web-platform/mcp-server/WEB_ARCHITECTURE.md" target="_blank">
                        <i class="bi bi-file-text"></i> Full Web Architecture Documentation
                    </a>
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}
